<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><title> 从零开始的前端 i18n · xiaopc</title><meta name="description" content="从零开始的前端 i18n - xiaopc"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://xiaopc.org/atom.xml" title="xiaopc"><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="xiaopc" type="application/atom+xml">
</head><body><div class="wrap"><header><a class="logo-link" href="/"><img src="/logo.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/" target="_self">home</a></li><li class="nav-list-item"><a class="nav-list-link" href="/archives/" target="_self">archives</a></li><li class="nav-list-item"><a class="nav-list-link" href="/links/" target="_self">links</a></li><li class="nav-list-item"><a class="nav-list-link" href="https://xpc.im/" target="_blank">about</a></li><li class="nav-list-item"><a class="nav-list-link" href="/blog-en/" target="_self">en</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">从零开始的前端 i18n</h1><div class="post-info">2020年6月22日 · <a href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></div><div class="post-content"><h2 id="零">0. 零</h2>
<p>internationalization, 抛去首尾是 18 个字母。</p>
<span id="more"></span>
<h2 id="实现的基础">1. 实现的基础</h2>
<p>在后端做 i18n 时一般是通过检查 HTTP 头 <code>Accept-Language</code> 来判断语言的。（也有加 IP 判断什么的那种）</p>
<p>前端没法读到这个请求头，而是通过 <code>navigator.language</code> 返回一个首选语言，此外还有 <code>navigator.languages</code>（实验性）提供如 <code>Accept-Language</code> 那样的语言优先顺序列表。</p>
<p>当然，如果已经习惯了各家浏览器对 W3C 标准的差异实现的话，对下面的内容应该不奇怪：</p>
<ol type="1">
<li><p>IE&lt;=10 是 <code>navigator.browserLanguage</code> 和 <code>navigator.userLanguage</code>。<code>userLanguage</code> 是系统语言，<code>Internet 选项</code> 仅对 <code>Accept-Language</code> 有效。</p></li>
<li><p>IE&lt;10 和 Safari&lt;10.2 的语言代码没有按 IETF 语言标签规范，是全小写的。</p></li>
</ol>
<h2 id="打包工具-前端框架可以做哪些事">2. 打包工具 / 前端框架可以做哪些事</h2>
<p>已经有一份比较详细的说明了，直接甩链接：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/CommanderXL/D-i18n">https://github.com/CommanderXL/D-i18n</a></p>
<h2 id="前端-i18n-与-seo">3. 前端 i18n 与 SEO</h2>
<p>目前搜索引擎对 JS 动态生成的内容基本不怎么支持（Google 说它们的 bot 支持一部分 JS 也只是处理跳转）。</p>
<p>要是真看重这些的话，还是分站的比较好（在 url param 里放语言标识符效果也不好）。</p>
<h2 id="还有很多要做比如-l10n">4. 还有很多要做，比如 l10n</h2>
<p>文本替换只是第一步，能正确显示出来是第二步。CJK 文本和拉丁文本在显示位置、字体 hinting 等等都还要处理。</p>
<p>这还没提到 RTL(right-to-left) 的阿拉伯语、希伯来语等，这种即使文字能正确从右至左显示，在展现方式等方面调整几乎无异于重新设计了。</p>
<p>internationalization 离 localization 还是有点距离的啊。</p>
<hr />
<p>本文参考了：</p>
<p>[1] https://developer.mozilla.org/zh-CN/docs/Web/API/NavigatorLanguage/language</p>
</div><div class="post-footer"><p class="license">本文以「<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-sa/4.0">知识共享 署名—相同方式共享（CC BY-SA 4.0）</a>」发布。<br><br>
允许复制、转贴、演绎本文，<br>
惟需注明本文地址，<br>
并遵循相同许可协议。<br></p><div class="like"><img class="like-qrcode" src="/wechat_like.png" alt="like qrcode"><img class="avatar" src="/avatar.jpg"></div></div></article></div></main><footer><div class="paginator"><a class="prev" href="/2020/11/18/serverless-%E5%86%99-telegram-bot-%E7%99%BD%E5%AB%96-ibm-cloud-1/">上一篇</a><a class="next" href="/2020/03/12/%E6%9D%A5%E4%B8%8A-mesh-wdr7650-%E6%98%93%E5%B1%95%E6%B5%8B%E8%AF%84/">下一篇</a></div><div class="copyright"><p>&copy; 2023 <a href="https://xiaopc.org">xiaopc</a>, <a href="https://hexo.io/" target="_blank">hexo</a> & <a href="https://github.com/xiaopc/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdnjs.loli.net/ajax/libs/mathjax/2.7.2-rc/MathJax.js?config=TeX-AMS-MML_HTMLorMML" crossorigin="anonymous"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-KNHBVTCZSN"></script><script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', "G-KNHBVTCZSN");</script></body></html>